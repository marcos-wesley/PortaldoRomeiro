services:
  server:
    build:
      context: ..
      dockerfile: Dockerfile
    container_name: portalromeiro-server
    environment:
      NODE_ENV: production
      PORT: "3000"
      DATABASE_URL: postgresql://portal:${POSTGRES_PASSWORD}@portalromeiro-postgres:5432/portalromeiro
      SESSION_SECRET: ${SESSION_SECRET}
    restart: unless-stopped
    networks:
      - portalromeiro_net
    ports:
      - "127.0.0.1:3000:3000"

networks:
  portalromeiro_net:
    external: true
